@{
    Layout = null;
}
<div class="modal fade" id="changePasswordModal" data-backdrop="false" aria-labelledby="changePasswordModalLabel">
    <div class="modal-dialog modal-sm">
        <div class="modal-content" style="z-index:999">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="changePasswordModalLabel"><i class="fa fa-key"></i> Change password</h4>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm">
                    <div class="form-group">
                        <label for="recipient-name" class="control-label">Old password</label>
                        <input type="password" class="form-control" name="oldpassword">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="control-label">New password</label>
                        <input type="password" class="form-control" name="newpassword">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="control-label">Confirm new password</label>
                        <input type="password" class="form-control" name="confirmpassword">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn bg-gray" data-dismiss="modal"><i class="fa fa-remove"></i> Cancel</button>
                <button type="button" class="btn bg-primary" id="btnChangePassword"><i class="fa fa-check"></i> OK</button>
            </div>
        </div>
    </div>
</div>

<script>
    $("#btnChangePassword").click(function () {
        var _check = true;
        $("#changePasswordForm input").each(function () {
            if ($.trim(this.value) == "") {
                this.focus();
                _check = false;
                return false;
            }
        });
        if (_check) {
            $.post("/Account/ChangePassword", $("#changePasswordForm").serialize(), function (ret) {
                if (ret.error) {
                    alert(ret.error);
                } else {
                    $("#changePasswordModal").modal("hide");
                    alert("密码修改成功！");
                }
            });
        }
    });
</script>